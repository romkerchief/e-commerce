{% extends "base.html" %}
{% load static %}
{% load humanize %}
{% block style %}
	<link rel="stylesheet" href="{% static 'breakpoints.css' %}">
	<link rel="stylesheet" href="{% static 'style_detail.css' %}">
	<style>	
		.title-a1{
			font-size: 1.7rem;
		}
	</style>
{% endblock style %}
{% block content %}
<section class="under-nav ">
  <div class="container bg-light mt-2 pt-2"> 
    <div class = "card-wrapper">
      <div class = "kartu">
        <!-- card left -->
        <div class = "product-imgs">
          <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner" style="max-width: 481px;">
            {% for image_url in carousel_image_urls %}
              <div class="carousel-item">
                <img src="{{ image_url }}" class="d-block w-100" alt="{{ product.name }} image">
              </div>
            {% empty %}
              <div class="carousel-item active"> {# Ensure one item is active if no images #}
                <img src="{% static 'images/empty.png' %}" class="d-block w-100" alt="No image available">
              </div>
            {% endfor %}
            </div>
            <div id="carousel-control">
              <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="arrow-carousel" aria-hidden="true"><i class='bx bxs-left-arrow'></i></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="arrow-carousel" aria-hidden="true"><i class='bx bxs-right-arrow'></i></span>
                <span class="sr-only">Next</span>
              </a>
            </div>
          </div>
        </div>
        <!-- card right -->
        <div class = "product-content">
          <h2 class = "product-title">{{product.name}}</h2>
          <div class = "product-rating">
            <i style="font-size:25px;" class='bx bxs-star' ></i>
            <i style="font-size:25px;" class='bx bxs-star' ></i>
            <i style="font-size:25px;" class='bx bxs-star' ></i>
            <i style="font-size:25px;" class='bx bxs-star' ></i>
            <i style="font-size:25px;" class='bx bxs-star-half' ></i>
            <span>4.7(21)</span>
          </div>

          {% if product.seller and product.seller.profile and product.seller.profile.seller_specific_profile and product.seller.profile.seller_specific_profile.store_name %}
						<p class="text-muted small mb-1">
							Sold by: <a href="{% url 'homey:store_detail' product.seller.profile.seller_specific_profile.slug %}" class="text-decoration-none">{{ product.seller.profile.seller_specific_profile.store_name }}</a>
						</p>
					{% endif %}

          <div class = "product-price">
            <!-- <p class = "last-price">Old Price: <span>$257.00</span></p> -->
            <p class = "new-price">Harga: <span class="price-span">Rp {{product.price|floatformat:2|intcomma}}</span></p>
          </div>

          <div class = "product-detail">
            <h2>Tentang Produk : </h2>
            <p>{{product.description}}</p>
            <ul>
              <li>Available: <span>{{product.stock}}</span></li>
              <li>Category: <span>{{product.category}}</span></li>
            </ul>
          </div>

          <div class = "purchase-info">
            <a data-action='add' data-product='{{product.id}}' href="" class="btn btn-primary update-cart">
              Masukkan Keranjang <i class = "fas fa-shopping-cart"></i>
            </a>

          </div>
        </div>
      </div>
    </div>
  </div>

	<div class="container bg-light mt-2">
		<h2 class="d-flex mx-auto"><a href="/product/" class="link-href mb-4 text-decoration-none title-a1">Produk Lain</a></h2>
		<div class="row px-2">
		{% for produk in product_list %}
            <div class="col-md-3 col-sm-6 col-6 p-1">
              <figure class="card card-product-grid" style="height: 300px;">
                <div class="img-wrap img-product">
                  <a href="{% url 'homey:detail' produk.slug %}">
                    {% if produk.main_image %}
                        <img src="{{ produk.main_image.url }}">
                    {% elif produk.imageThumbnail and produk.imageThumbnail != '/static/empty.png' %}
                        <img src="{{ produk.imageThumbnail }}">
                    {% else %}
                        <img src="{% static 'images/empty.png' %}" >
                    {% endif %}
                  </a>
                  <a class="btn-overlay" href="{% url 'homey:detail' produk.slug %}"><i class="fa fa-search-plus"></i> Quick view</a>
                </div> <!-- img-wrap.// -->
                <figcaption class="info-wrap text-center ">
                  <div class="fix-height">
                    <a href="{% url 'homey:detail' produk.slug %}" class="title title-product text-decoration-none">{{produk.name}}</a>
                    {% if produk.seller and produk.seller.profile and produk.seller.profile.seller_specific_profile and produk.seller.profile.seller_specific_profile.store_name %}
                      <p class="text-muted small mb-1">
                        Sold by: <a href="{% url 'homey:store_detail' produk.seller.profile.seller_specific_profile.slug %}" class="text-decoration-none">{{ produk.seller.profile.seller_specific_profile.store_name }}</a>
                      </p>
                    {% endif %}
                    <div class="price-wrap mt-2">
                      <span class="price price-product pt-2">Rp {{produk.price|floatformat:2|intcomma}}</span>
                    </div> <!-- price-wrap.// -->
                  </div>
                </figcaption>
              </figure>
            </div> <!-- col.// -->
    {% endfor %}
		</div>
	</div>
</section>
{% endblock content %}
{% block script %}
<script type="text/javascript">
  var carousel = document.getElementsByClassName("carousel-item")
  carousel[0].classList.add("active")
  console.log(carousel.length)
  if(carousel.length <= 1){
    document.getElementById("carousel-control").classList.add('hidden')
  }
</script>
{% endblock script %}
